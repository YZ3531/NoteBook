## 第1章 预备知识
### 服务器和客户端
- 服务器 = 高配置硬件 + 特殊软件（能提供服务的软件）
- 客户端= 低配置硬件 + 一般软件（能享受服务的软件）
- web服务器 =  高配置硬件 +能提供web服务的软件（web服务就是让和客户端能访问网页的服务）
### web请求与响应
请求：客户端浏览器向web服务器发起请求；
响应：

- web服务器收到请求后，进行处理，并返回处理结果；
- 浏览器会解析这个结果，显示在网页上；

- **如果这个.html文件中引用外部的资源（.css,.js.png） 会再次发请求**；



### 虚拟web服务器-访问网页
- 双击启动，不要关，不要动

- 网页文件复制public下，就相当于操作服务器上的文件了。

- 在浏览器中输入指定的网址来访问。

  

### 接口

- 小黑窗服务器已经内置了接口；

- 接口是后端程序员写的函数，我们通过ajax技术来调用这个函数；

- 后端写接口，前端调接口；



### 什么是http协议
http协议是浏览器与web服务器之间的通信约定；
两个部分组成：

- 请求报文：对请求的约定
- 响应报文：对响应的约定

### 请求报文

三个部分：

- 请求行
  包含请求方式 和**请求地址**
- 请求头
- 请求体：本次请求带的参数
get没有请求体；post有请求体
### 响应报文
三个部分：
- 响应行

  **状态码。至少要记住5个**。

- 响应头

- 响应体
**内容在响应体中。这里才是重点**



## 第2章 认识ajax
### AJAX的应用场景
ajax是一种技术方案，它的应用场景是：在不刷新页面的情况下，去请求服务器，以获取新的数据。简称：**局部更新**
### AJAX是什么
-  中文是异步的javascript和XML
-  AJAX并不是一种新技术，而是一种成熟的解决方案。它要解决的问题是在**网页的局部更新**。
   -  A:异步的
   -  X:xml
-  浏览器通过内置对象 XMLHttpRequest 向服务器发起请求，并可以接收服务器返回给浏览器的数据，这一过程或实现这一过程的技术就是我们所说的 Ajax。
### AJAX的优点
局部更新，提升用户体验。
分离开发，提高开发效率。



## 第3章 JQuery中的ajax
### $.ajax基本使用
发ajax请求就是填空题。

答案在：**接口文档中**。

```
$.ajax(
  {
     url,//接口地址。后端接口文档中规定了，不能修改。
     type:  //请求的类型。后端接口文档中规定了，不能修改。
     data: // 传递的数据。后端接口文档中规定了参数，前端按需填入。
     success: function (result) {
				 // 前端定义的回调函数，在请求成功之后，自动被调用
         console.log(result)
       }
  }
)
```
### ajax中的回调函数
- 回调函数是我们自己定义的，供别人调用的函数
- ajax请求发出之后，由于我们不知道何时服务器会处理完这个请求，所以我们通过回调函数的方式来处理服务器的返回值
- success:function(  响应体 ){}

### ajax与http协议
ajax请求是http请求中的一种类型，它也遵循http协议。
学习ajax要观察network面板中的请求与响应
### ajax与接口
- 接口是后端同学写好的函数；后端写接口；请端调接口；
- ajax请求与普通请求访问接口时的区别：
	- ajax可以人为控制何时调用接口，如何处理返回值；
	- 普通请求不能控制

### $中的get请求

```
$.ajax({
    type:'get',
    url://接口地址
    data://参数
    success:function(res){

    }
})
```





## 第4章 [案例]留言板

### 留言板-演示及分析

先分析功能再开始做

### 留言板-获取留言

- 获取留言的功能是由接口提供的，我们只是调用接口。
- 获取回来的数据是数组，要通过循环和字符串拼接来把数组转成html结构
  - 对时间进行格式转化 var formatdt = new Date(item.created).toLocaleString();
  - 在显示留言之间，要先清空留言区域

### 留言板-添加留言



- 添加留言的功能是由接口提供的，我们只是调用接口。
- 对获取的用户填入的数据一定要做校验
  - 是否填写了？
  - 填写的内容是否够用？
- 添加留言成功之后
  - 还要再次更新页面
  - 清空发言区域





## 第5章 模板引擎

### 常见模板引擎

模板引擎

- 作用： 用数据和指定格式的模板生成html字符串。
- 使用：模板引擎的产品非常多，其使用方法都大致相同，查阅文档即可。

### arttemplate快速使用

使用步骤

1. 引入template-web.js文件
2. 定义模板，注意指定script的id和type属性
3. 准备数据。数据是对象格式。
4. 调用template函数，为模板分配数据，获得渲染结果。

### 模板语法

- artTemplate模板中支持两种语法；
- artTemplate模板中的条件语句的写法；
- artTemplate模板中循环语句的写法；
- artTemplate模板中使用外部函数；

## 第6章 原生ajax

### 原生ajax基本格式

- ajax的功能是由XMLHttpRequest对象实现的

- 原生ajax的格式

  ```
  // 第一步： 新建一个XMLHttpRequest对象(xhr)
    var xhr = new XMLHttpRequest();
  
  // 第二步： 设置请求。 xhr.open(请求的方式，接口的url地址);
  xhr.open('get', 'common/getCurrentTime');
  
  // 第三步：设置回调函数。返回的数据存放在xhr.responseText中。
  xhr.onload = function() {
      console.info('从服务器返回的数据',    xhr.responseText);
  };
  // 第四步： 发送请求。
  xhr.send();
  ```

  

### 原生ajax发get请求-带参数

- get请求的参数会以**查询字符串的格式**附加在请求地址后面
  - url?参数1=值1&参数2=值2
- 在network中观察参数出现的位置。
  - 在http的请求行中可以看到
  - 在请求的地址中也可以看到

### 原生ajax发post请求

服务器上接口是post类型的，使用原生的ajax发请求时，要注意两点区别：

1. 如果有参数，则参数以查询字符串的格式附加在send()方法中；

   ```
   var p = 'userName=' + name + '&password=' + pwd;
   xhr.send(p);
   ```

- 参数
  - 可以在http协议的请求体中看到
  - 可以在network面板中看到 

2. 要设置请求头。

   ```
   xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded')
   ```

   

### get和post的区别

- 是使用get还是post完全由后端接口决定，前端调用时，只能照写；
- get传递参数，参数是请求行中
  - 在地址栏中能看见
- post传递参数，参数是在请求体中
  - 在地址栏中看不见。
  - 额外设置请求头
  - 把参数写在send()方法中

### 其它请求方式

- 接口的类型不仅只有get,post
  - put 
    - 小黑窗服务器内置一个put类型接口：
    - xhr.open('put', 'http://localhost:3005/common/putapitest');
  - delete
  - option
- **接口是什么类型，是由后端决定的**



### JSON

- json是一种特殊格式的字符串：它可以与js中的对象进行转换

  - JSON.parse(JSON字符串)  === > js中的数据
  - JSON.stringify(js中的数据) ===> JSON字符串

- 从接口中返回的数据都是字符串

  - 大多数都是JSON字符串

    

### XML


### 理解同步异步

同步：代码的书写顺序和执行顺序相同；
异步：代码中的书写顺序与执行顺序不相同；

### ajax中的同步异步

第三个参数是控制同异步的；
推荐使用异步的方式；



### onreadystatechange及ajax状态码

ajax有状态码，这个状态码是变化的；
onreadystatechange是老的写法；

### get缓存问题

添加一个额外的参数在url中，其作用就是让每一次的请求的地址与之前的都不一样，这样浏览器就不会缓存这个get请求了



### ajax中的异常错误处理










